{% extends "base.html" %}

{% block content %}
<h2>Edit Weather Record #{{ record.id }}</h2>

{% if error %}
<p class="error">{{ error }}</p>
{% endif %}
<link
  rel="stylesheet"
  href="https://unpkg.com/leaflet/dist/leaflet.css"
/>

<form method="post" action="/edit/{{ record.id }}">
  <label>Location:</label><br>
  <input type="text" name="location" value="{{ record.location }}" required><br><br>

  <label>Start Date (YYYY-MM-DD):</label><br>
  <input type="date" name="start_date" value="{{ record.start_date }}" required><br><br>

  <label>End Date (YYYY-MM-DD):</label><br>
  <input type="date" name="end_date" value="{{ record.end_date }}" required><br><br>

  <label>Minimum Temperature (optional):</label><br>
  <input type="number" step="0.1" name="temperature_min" value="{{ record.temperature_min }}"><br><br>

  <label>Maximum Temperature (optional):</label><br>
  <input type="number" step="0.1" name="temperature_max" value="{{ record.temperature_max }}"><br><br>
  
  <button type="submit">Update</button>
</form>

<h3>Map:</h3>
<div id="map" style="height: 300px;"></div>
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
  var map = L.map('map').setView([{{ record.latitude }}, {{ record.longitude }}], 13);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
  }).addTo(map);
  L.marker([{{ record.latitude }}, {{ record.longitude }}]).addTo(map);
</script>

<h3>Related YouTube Videos:</h3>
<ul>
  {% for link in record.youtube_links %}
  <li><a href="{{ link }}" target="_blank">{{ link }}</a></li>
  {% endfor %}
</ul>

<a href="/">Back to list</a>

<!-- Leaflet CSS and JS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

{% endblock %}
